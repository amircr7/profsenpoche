<ion-view view-title="ProfenPoche" >
    <ion-content class="post-content-message">
        <ion-refresher
                pulling-text="Pull to refresh..."
                on-refresh="doRefresh()">
        </ion-refresher>
        <div class="list">
            <div class="">
                <!--<div ng-repeat="user in users" ng-controller="MessageCtrl">-->
                    <div ng-repeat="message in messages" class="message-wrapper">

                        <div ng-show="message.title !== currentusername">
                            <div class="chat-bubble left">
                                <div class="message" ng-bind-html="message.message">
                                </div>

                                <div class="message-detail">
                                    <span class="bold">{{message.title}}</span>
                                    <span>{{message.message_date}}</span>
                                   <!-- <span>affichage{{message.title}} / {{currentusername}}</span>-->
                                </div>
                            </div>
                        </div>
                        <!--Id prof Session unique c'est 1 et Id eleve c'est tout Id different de 1 (pour le moment) -->
                        <div ng-show="message.title == currentusername">
                            <div class="chat-bubble right">
                                <div class="message" ng-bind-html="message.message">
                                </div>
                                <div class="message-detail">
                                    <span class="bold">{{message.title}}</span>
                                    <span>{{message.message_date}}</span>
                                   <!-- <span>affichage{{message.title}} / {{currentusername}}</span>-->
                                </div>
                            </div>
                        </div>
                        <div class="cf"></div>
                    </div>
               <!-- </div>-->




            </div>
        </div>

        <ion-infinite-scroll
                ng-if="postsCompleted == false"
                on-infinite="getPosts()"
                distance="10%">
        </ion-infinite-scroll>
        <!--<img src="http://ww1.prweb.com/prfiles/2014/04/10/11752526/gI_134971_best-image-web-hosting.png" style="text-align: left">-->
        <div ng-controller="CameraController">
            <img ng-show="imgURI !== undefined" ng-src="{{imgURI}}" style="text-align: center" >
        </div>
    </ion-content>
    <div class="bar bar-footer bar-stable comment-stable-main">
        <!-- il faut vÃ©rifier addMessage si c'est bien ng-submit ou non en treme de vitesse d'appel de fonction  -->
        <form  class="comment-form-main" method="post" ng-submit="addMesage()" name="postForm" novalidate>
            <div class="row small-font row-comment">

                <span class="col-75">

                    <div ng-controller="CameraController" padding="true" >
                        <img  style="border-color: #11c1f3;background-color: #11c1f3;color: #fff;width: 20px; height: 35px;float: left;" ng-src="http://s23.postimg.org/q34p6zmwn/pics_Logo.png" ng-click="takePhoto()">
                        <img  style="border-color: #11c1f3;background-color: #11c1f3;color: #fff;width: 20px; height: 35px;float: left;" ng-src="http://s23.postimg.org/b5w85z9o7/plus_Logo.png"  ng-click="choosePhoto()">

                    </div>
                	  <label class="item item-input comment-div-label">

                          <textarea class="comment-main-text" required ng-model="datamessage" name="message" placeholder="Message" auto-focus></textarea>
                      </label>
                    <!-- <img src="https://www.planeteprofs.com/wp-content/uploads/2016/03/photo_logo_appli.png" style="text-align: center" ng-controller="CameraController">-->
                    <!--ng-show="imgURI !== undefined" ng-src="{{imgURI}}"-->
                </span>
                <span class="col-25">
                    <button ng-disabled="postForm.$invalid"  class="button button-block button-assertive button-comment"><span class="icon ion-android-send"></span>
                    </button>

                </span>
            </div>

        </form>

    </div>
</ion-view>